# Boxpack

Boxpack — браузерный визуализатор упаковки коробок в 3D. Вводите размеры внешней коробки и товаров, генерируйте несколько вариантов укладки и сравнивайте заполнение в интерактивном просмотре.

## Возможности
- Несколько методов упаковки с разными стратегиями (grid, candidate positions, maximal spaces).
- Быстрый расчет варианта с максимальным количеством одинаковых товаров.
- 3D‑превью на Three.js с подсветкой слоев и управлением камерой.
- Избранные наборы и история замеров в `localStorage`.
- Переключение единиц (cm/mm) и качества (fast/balanced/deep).
- Интерфейс на нескольких языках.

## Как запустить
Проект без сборки — это статические файлы. Лучше запускать через локальный сервер, чтобы модули корректно импортировались.

```sh
python3 -m http.server 8080
```

Откройте `http://localhost:8080` в браузере.

## Как пользоваться
1. Укажите размеры внешней коробки.
2. Добавьте товары (название, количество, размеры, разрешение на поворот).
3. Нажмите **Generate variants** для сравнения разных методов.
4. Выберите вариант в списке справа, чтобы увидеть 3D‑раскладку.
5. Для подбора максимального количества одинаковых товаров используйте **Max fill**.

## Ключевые функции (app.js)
- `t`, `applyTranslations` — перевод интерфейса по ключам и применение i18n‑текста.
- `setUnit`, `scaleAllDimensions`, `formatUnitValue` — переключение единиц и масштабирование размеров.
- `setQuality`, `getQualityTrialCount` — настройка количества прогонов для быстрых/глубоких расчетов.
- `loadFavorites`/`saveFavorites`, `loadHistory`/`saveHistory` — сохранение избранного и истории в `localStorage`.
- `addItem`, `applyDraftItem`, `expandItems` — управление списком товаров и разворачивание по количеству.
- `packItems` — базовый grid‑алгоритм укладки.
- `packItemsCandidates` — укладка по кандидатным позициям с рандомизацией и приоритетами.
- `packItemsSpaces` — алгоритм максимальных свободных объемов (spaces) с оценкой плотности.
- `packMaxIdenticalItems` — поиск максимального количества одинаковых товаров.
- `generateVariants`, `generateMaxFillVariant` — генерация и ранжирование вариантов по fill/compactness.
- `renderVariants`, `renderScene`, `animate` — отрисовка карточек вариантов и 3D‑сцены.

## Структура проекта
- `index.html` — разметка и подключение Three.js через importmap.
- `app.js` — вся логика (UI, алгоритмы упаковки, визуализация).
- `styles.css` — стили.

## Зависимости
- Three.js загружается из CDN: `https://unpkg.com/three@0.161.0/`.

## Лицензия
MIT — свободное использование.
